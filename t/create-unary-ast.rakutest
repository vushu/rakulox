use Test;

use lib "lib";
use-ok "RakuLox";

use RakuLox::LoxGrammar;
use RakuLox::LoxActions;
use RakuLox::LoxInterpreter;

my $actions = LoxActions.new;
my $parser = LoxGrammar.new;
my $interpreter = LoxInterpreter.new;

my $code = q:to/END/;
-2 * 2;
END


my $ast = $parser.parse($code, :actions($actions)).made;
if $ast {
    say $interpreter.evaluate($ast);
}
else {
    say "Failed to parse";
}
